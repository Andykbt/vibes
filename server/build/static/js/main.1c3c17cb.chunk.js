(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,t,n){e.exports={container:"Weather_container__2vUkM",wrapper:"Weather_wrapper__2idER",temp:"Weather_temp__2pBkc",city:"Weather_city__PKWlB",secondary:"Weather_secondary__2uywI",secondaryContainer:"Weather_secondaryContainer__3xFYT"}},15:function(e,t,n){e.exports={searchbox:"Search_searchbox__1bvT6",sub:"Search_sub__7W8jH",refresh:"Search_refresh__3_VQe",rotateIcon:"Search_rotateIcon__1seFA",spin:"Search_spin__2tBkQ",resultsContainer:"Search_resultsContainer__1yE41"}},29:function(e,t,n){e.exports={container:"Recommendations_container__1JtDZ",box:"Recommendations_box__1kR9d",rightContainer:"Recommendations_rightContainer__2Oygd"}},39:function(e,t,n){e.exports={Centerpiece:"Centerpiece_Centerpiece__RuEYP"}},44:function(e,t,n){},45:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),s=n(25),r=n.n(s),i=(n(44),n(3)),o=(n(45),n(17)),j=n(7),l=n(39),u=n.n(l),b=n(1);function d(e){var t=e.weather,n=Object(c.useState)(""),a=Object(i.a)(n,2),s=a[0],r=a[1],l=Object(j.useTransition)(200===t.cod?t:[],{from:{opacity:0,transform:"translateX(-50%) translateY(0%)",scale:0},enter:{opacity:1,transform:"translateX(-50%) translateY(0%)",scale:1},leave:{opacity:0,transform:"translateX(-50%) translateY(0%)",scale:0},config:{duration:1e3,delay:1e3}});return Object(c.useEffect)((function(){200===t.cod&&function(e){var t=null===e||void 0===e?void 0:e.weather[0].id;t<300?r("/assets/Thunder.mp4"):t<600?r("/assets/Rainy.mp4"):t<800?r("/assets/Snowy.mp4"):800===t?r("/assets/Sunny.mp4"):t>800&&r("/assets/Cloudy.mp4")}(t),console.log("")}),[t]),l((function(e){return Object(b.jsx)(j.animated.div,{className:u.a.Centerpiece,style:Object(o.a)({},e),children:Object(b.jsx)("video",{className:"",autoPlay:!0,loop:!0,muted:!0,controls:!1,children:Object(b.jsx)("source",{src:s,type:"video/mp4"})})})}))}var h=n(26),m=n(19),O=n.n(m),f=n(15),p=n.n(f),x=n(29),_=n.n(x);function y(e){var t=e.tracks,n=Object(j.useSpringRef)(),a=Object(c.useState)({}),s=Object(i.a)(a,2),r=s[0],l=s[1],u=Object(j.useTransition)(5===Object.keys(t).length?t:[],{ref:n,trail:400,from:{opacity:0,scale:0},enter:{opacity:1,scale:1},leave:{opacity:0,scale:0}}),d=Object(j.useSpring)({opacity:0!==Object.keys(r).length?1:0,right:0!==Object.keys(r).length?"0em":"-30em"});return Object(j.useChain)([n],[1]),Object(b.jsxs)("div",{className:_.a.container,children:[Object(b.jsx)("div",{className:_.a.box,children:u((function(e,t){return Object(b.jsx)(j.animated.article,{style:Object(o.a)({},e),onMouseEnter:function(){return l(t)},children:Object(b.jsx)("a",{href:t.External_link,target:"_blank",children:Object(b.jsx)("img",{src:t.Image})})})}))}),0!==Object.keys(r).length&&Object(b.jsxs)(j.animated.article,{className:_.a.rightContainer,style:d,children:[Object(b.jsx)("a",{href:r.External_link,target:"_blank",children:Object(b.jsx)("img",{src:r.Image})}),Object(b.jsxs)("a",{href:r.External_link,target:"_blank",children:[Object(b.jsx)("h1",{children:r.Title}),Object(b.jsx)("p",{children:r.Artist})]})]})]})}var v=function(e,t){return Object(h.a)({},t.name,t.value)},g=function(e){var t=Object(c.useReducer)(v,{}),n=Object(i.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(!1),o=Object(i.a)(r,2),j=(o[0],o[1]),l=Object(c.useState)(null),u=Object(i.a)(l,2),d=u[0],h=u[1];var m=Object(c.useState)({}),f=Object(i.a)(m,2),x=(f[0],f[1]);var _=Object(c.useState)({}),g=Object(i.a)(_,2),S=g[0],k=g[1];function C(){O()("/recommendations").then((function(e){return e.json()})).then((function(e){return e.tracks})).then((function(e){for(var t=[],n=0;n<e.length;n++)t.push({Title:e[n].name,Artist:e[n].artists[0].name,Image:e[n].album.images[1].url,External_link:e[n].external_urls.spotify});k(t)}))}var N=Object(c.useState)(!1),w=Object(i.a)(N,2),T=w[0],E=w[1];return Object(c.useEffect)((function(){"Submit"===e.mode&&k({})}),[e.mode]),Object(b.jsxs)("div",{children:[Object(b.jsxs)("form",{className:p.a.searchbox,onSubmit:function(t){t.preventDefault(),j(!0),"Submit"===e.mode&&setTimeout((function(){Object.entries(a).map((function(e){var t,n=Object(i.a)(e,2),c=(n[0],n[1]);return t=c.toString(),void O()("/city",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({city:t})}).then((function(e){return e.json()})).then((function(e){h(e)}))})),j(!1)}),0)},children:["Submit"===e.mode?Object(b.jsx)("input",{className:p.a.searchbox,type:"text",placeholder:"Enter a city...",onChange:function(e){s({name:e.target.name,value:e.target.value})}}):Object(b.jsx)(y,{tracks:S}),Object(b.jsx)("button",{className:"".concat("Refresh"===e.mode?p.a.refresh:p.a.sub," ").concat(T?p.a.spin:""),onClick:"Refresh"===e.mode?function(){T||(E(!0),k({}),setTimeout((function(){console.log("getting new tracks"),C(),setTimeout((function(){E(!1)}),4e3)}),3e3))}:null})]}),d&&"Submit"==e.mode&&Object(b.jsx)("section",{className:p.a.resultsContainer,children:function(){if(0===d)return Object(b.jsx)("h1",{children:"No results found"});for(var t=[],n=0;n<d.length;n++){var c=d[n].matching_full_name,a=d[n]._links["city:item"].href,s=a.lastIndexOf("geonameid:")+10;a=a.substring(s).slice(0,-1),t.push({city:c,geocodeID:a})}return t.map((function(t,n){return Object(b.jsx)("a",{id:n,onClick:function(){var n;n=t.geocodeID,h({}),O()("/weather",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({cityID:n})}).then((function(e){return e.json()})).then((function(t){x(t),e.callback(t),C()}))},children:t.city})}))}()})]})};var S=function(){var e=Object(c.useState)({}),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(i.a)(s,2),o=r[0],j=r[1];Object(c.useEffect)((function(){a(function(){for(var e,t={},n=/([^&;=]+)=?([^&;]*)/g,c=window.location.hash.substring(1);e=n.exec(c);)t[e[1]]=decodeURIComponent(e[2]);return t}())}),[]),Object(c.useEffect)((function(){l()}),[n]);var l=function(){O()("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+n.access_token},json:!0}).then((function(e){return e.json()})).then((function(e){j(e.display_name)}))};return Object(b.jsx)("div",{className:"spotify",children:n.access_token?Object(b.jsx)("div",{children:o?Object(b.jsxs)("a",{href:"",children:["Hi, ",Object(b.jsx)("span",{children:o})]}):Object(b.jsx)("a",{href:"",children:"Logout"})}):Object(b.jsxs)("a",{href:"https://vibes-spotify.herokuapp.com/login",children:["Login with ",Object(b.jsx)("span",{children:"Spotify"})]})})},k=n(14),C=n.n(k),N=n(30),w=n(31);function T(e){var t=e.weather;return Object(j.useTransition)(200===t.cod?t:[],{from:{left:"-100%"},enter:{left:"13%"},leave:{left:"-100%"},config:{tension:170,friction:50}})((function(e,t){return Object(b.jsxs)(j.animated.section,{className:C.a.container,style:Object(o.a)({},e),children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{className:C.a.temp,children:[t.main.temp,"\xb0C"]}),Object(b.jsx)("h2",{className:C.a.city,children:t.name})]}),Object(b.jsxs)("div",{className:C.a.secondaryContainer,children:[Object(b.jsxs)("div",{className:C.a.secondary,children:[Object(b.jsx)(N.a,{icon:w.b}),Object(b.jsxs)("span",{children:[t.main.humidity,"%"]})]}),Object(b.jsxs)("div",{className:C.a.secondary,children:[Object(b.jsx)(N.a,{icon:w.c}),Object(b.jsxs)("span",{children:[t.wind.speed,"km/hr"]})]}),Object(b.jsxs)("div",{className:C.a.secondary,children:[Object(b.jsx)(N.a,{icon:w.a}),Object(b.jsxs)("span",{children:[t.main.temp_max,"/",t.main.temp_min]})]})]})]})}))}var E=function(){var e=Object(c.useState)({}),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),r=Object(i.a)(s,2),o=r[0],j=r[1],l=Object(c.useState)({}),u=Object(i.a)(l,2),h=(u[0],u[1]);function m(e){j(!0),a(e)}return Object(b.jsxs)("div",{className:"App",children:[!o&&Object(b.jsx)("video",{className:"landing bg",autoPlay:!0,loop:!0,muted:!0,controls:!1,children:Object(b.jsx)("source",{src:"/assets/Landing.mp4",type:"video/mp4"})}),Object(b.jsxs)("div",{className:"header ".concat(o?"expand":""),children:[Object(b.jsxs)("h1",{onClick:function(){j(!1),h({}),a({})},className:"heading ".concat(o?"expand":""),children:[Object(b.jsx)("p",{className:"transition",children:"v"}),"ibes"]}),Object(b.jsx)(S,{})]}),Object(b.jsx)(T,{weather:n||""}),Object(b.jsx)(d,{weather:n||""}),Object(b.jsx)("div",{className:"main ".concat(o?"expand":""),children:o?Object(b.jsx)(g,{callback:m,mode:"Refresh"}):Object(b.jsx)(g,{callback:m,mode:"Submit"})})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(E,{})}),document.getElementById("root")),I()}},[[53,1,2]]]);
//# sourceMappingURL=main.1c3c17cb.chunk.js.map